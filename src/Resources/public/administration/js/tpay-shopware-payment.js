!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=(window.__sw__.assetPath + '/bundles/tpayshopwarepayment/'),n(n.s="tpCQ")}({"+HJm":function(e){e.exports=JSON.parse('{"tpay-shopware-payment":{"config":{"successTestMerchantCredentialsNotificationTitle":"Valid merchant credentials","successTestMerchantCredentialsNotificationMessage":"A test connection to Tpay server was successfully established","errorTestMerchantCredentialsNotificationTitle":"Invalid merchant credentials","errorTestMerchantCredentialsNotificationMessage":"There was a problem with the test connection. Check the correctness of the provided data.","buttonCredentialsTest":"Test credentials","invalidTestMerchantCredentialsNotificationTitle":"Missing data","emptyMerchantId":"Complete the Merchant ID","emptyMerchantSecret":"Fill the security key","emptyMerchantTrApiKey":"Complete the API key","emptyMerchantTrApiPass":"Complete the API password"},"order":{"tpayTransactionIdLabel":"Tpay transaction identifier"}}}')},M586:function(e){e.exports=JSON.parse('{"tpay-shopware-payment":{"config":{"successTestMerchantCredentialsNotificationTitle":"Verbindung testen","successTestMerchantCredentialsNotificationMessage":"ine Testverbindung zum Tpay-Server wurde erfolgreich hergestellt.","errorTestMerchantCredentialsNotificationTitle":"Testverbindung fehlgeschlagen","errorTestMerchantCredentialsNotificationMessage":"Es gab ein Problem mit der Testverbindung. Bitte überprüfen Sie die angegebenen Daten","buttonCredentialsTest":"Verbindung testen","invalidTestMerchantCredentialsNotificationTitle":"Fehlende Daten","emptyMerchantId":"Vervollständigen Sie die Händler-ID","emptyMerchantSecret":"Füllen Sie den Sicherheitsschlüssel aus","emptyMerchantTrApiKey":"Vervollständigen Sie den API-Schlüssel","emptyMerchantTrApiPass":"Vervollständigen Sie das API-Passwort"},"order":{"tpayTransactionIdLabel":"Tpay-Transaktionskennzeichen"}}}')},j8FD:function(e){e.exports=JSON.parse('{"tpay-shopware-payment":{"config":{"successTestMerchantCredentialsNotificationTitle":"Testowe połączenie","successTestMerchantCredentialsNotificationMessage":"Pomyślnie nawiązano testowe połączenie z serwerem Tpay","errorTestMerchantCredentialsNotificationTitle":"Nieudane testowe połączenie","errorTestMerchantCredentialsNotificationMessage":"Wystąpił problem z tetowym połączeniem. Sprawdź poprawność podanych danych","buttonCredentialsTest":"Przetestuj połączenie","invalidTestMerchantCredentialsNotificationTitle":"Brakujące dane","emptyMerchantId":"Uzupełnij identyfikator sprzedawcy","emptyMerchantSecret":"Uzupełnij klucz bezpieczeństwa","emptyMerchantTrApiKey":"Uzupełnij klucz API","emptyMerchantTrApiPass":"Uzupełnij hasło API"},"order":{"tpayTransactionIdLabel":"Identyfikator transakcji Tpay"}}}')},tpCQ:function(e,t,n){"use strict";n.r(t);var r=Shopware,a=r.Component,i=r.Mixin;a.register("tpay-test-merchant-credentials-button",{template:'{% block tpay_shopware_payment_test_merchant_credentials_button %}\n    <sw-button-process :isLoading="isLoading" :processSuccess="isSuccess" :animationTimeout="100" @click="tpayTestMerchantCredentials" >\n        {{ $tc(\'tpay-shopware-payment.config.buttonCredentialsTest\') }}\n    </sw-button-process >\n{% endblock %}\n',inject:["TpayMerchantCredentialsService","systemConfigApiService"],mixins:[i.getByName("notification")],data:function(){return{isLoading:!1,isSuccess:!1,fields:[]}},methods:{tpayTestMerchantCredentials:function(){var e=this;this.isLoading=!0,this.systemConfigApiService.getValues("TpayShopwarePayment.config",null).then((function(t){e.fields=t;var n=e.getValue("merchantId"),r=e.getValue("merchantSecret"),a=e.getValue("merchantTrApiKey"),i=e.getValue("merchantTrApiPass");e.TpayMerchantCredentialsService.validateMerchantCredentials(n,r,a,i).then((function(t){e.isLoading=!1,!1!==t.success?t.credentialsValid?e.onSuccess():e.onError():e.onInvalidData(t.code)})).catch((function(){e.isLoading=!1,e.onError()}))}))},onSuccess:function(){var e=this;this.isSuccess=!0,this.createNotificationSuccess({title:this.$tc("tpay-shopware-payment.config.successTestMerchantCredentialsNotificationTitle"),message:this.$tc("tpay-shopware-payment.config.successTestMerchantCredentialsNotificationMessage"),autoClose:!0}),setTimeout((function(){return e.isSuccess=!1}),2e3)},onError:function(){this.createNotificationError({title:this.$tc("tpay-shopware-payment.config.errorTestMerchantCredentialsNotificationTitle"),message:this.$tc("tpay-shopware-payment.config.errorTestMerchantCredentialsNotificationMessage"),autoClose:!0})},onInvalidData:function(e){var t="";switch(e){case"merchantId":t=this.$tc("tpay-shopware-payment.config.emptyMerchantId");break;case"merchantSecret":t=this.$tc("tpay-shopware-payment.config.emptyMerchantSecret");break;case"merchantTrApiKey":t=this.$tc("tpay-shopware-payment.config.emptyMerchantTrApiKey");break;case"merchantTrApiPass":t=this.$tc("tpay-shopware-payment.config.emptyMerchantTrApiPass");break;default:t=this.$tc("tpay-shopware-payment.config.errorTestMerchantCredentialsNotificationMessage")}this.createNotificationError({title:this.$tc("tpay-shopware-payment.config.errorTestMerchantCredentialsNotificationTitle"),message:t,autoClose:!0})},getFieldByName:function(e,t){return e.$children[0].$attrs.name==="TpayShopwarePayment.config."+t},getValue:function(e){return this.fields["TpayShopwarePayment.config."+e]}}});function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(a=r.key,i=void 0,i=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===o(i)?i:String(i)),r)}var a,i}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var a=d(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Shopware.Component.override("sw-order-user-card",{template:"{% block sw_order_detail_base_secondary_info_payment %}\n    {% parent %}\n    <template v-if=\"isTpayPayment\">\n        <dt>{{ $tc('tpay-shopware-payment.order.tpayTransactionIdLabel') }}</dt>\n        <dd>{{ currentOrder.transactions.last().customFields.tpay_shopware_payment_transaction_id }}</dd>\n    </template>\n{% endblock %}\n",computed:{isTpayPayment:function(){var e=this.currentOrder.transactions.last().customFields;return null!==e&&e.hasOwnProperty("tpay_shopware_payment_transaction_id")&&e.tpay_shopware_payment_transaction_id.length>0}}});var h=Shopware.Classes.ApiService,f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(i,e);var t,n,r,a=l(i);function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"tpay";return s(this,i),a.call(this,e,t,n)}return t=i,(n=[{key:"validateMerchantCredentials",value:function(e,t,n,r){return this.httpClient.post("_action/".concat(this.getApiBasePath(),"/validate-merchant-credentials"),{merchantId:e,merchantSecret:t,merchantTrApiKey:n,merchantTrApiPass:r},{headers:this.getBasicHeaders()}).then((function(e){return h.handleResponse(e)}))}}])&&c(t.prototype,n),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(h),y=Shopware.Application;y.addServiceProvider("TpayMerchantCredentialsService",(function(e){var t=y.getContainer("init");return new f(t.httpClient,e.loginService)}));var m=n("M586"),T=n("+HJm"),b=n("j8FD");Shopware.Locale.extend("de-DE",m),Shopware.Locale.extend("en-GB",T),Shopware.Locale.extend("pl-PL",b)}});